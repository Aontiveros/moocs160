/*!
* express
* Copyright(c) 2009-2013 TJ Holowaychuk
* Copyright(c) 2013 Roman Shtylman
* Copyright(c) 2014-2015 Douglas Christopher Wilson
* MIT Licensed
*/

//'use strict';

//module.exports = require('./lib/express');
var mysql = require('mysql');
var express = require('./lib/express');
var app = express();

app.use(express.static(__dirname + "/../../"));

//
// need to change this for phpmyadmin
//
var connection = mysql.createConnection({
  host     : 'localhost',
  user     : 'root',
  password : 'password',
  database : 'moocs'
});

connection.connect(function(err){
  if(!err) {
    console.log("Database is connected ... \n\n");
  } else {
    console.log("Error connecting database ... \n\n");
    connection.end();
  }
});

app.get('/allCourseData', function (req, res) {
  var q2 = 'SELECT * FROM coursedetails';
  var q1 = 'SELECT * FROM course_data';

  connection.query(q1, function(err, rows, fields) {
    if (!err){
      //console.log('The solution is: ', rows);
      res.json(rows);
    }else{
      console.log('Error while performing Query.');
    }});

    });

    var server = app.listen(3000, function () {
      var host = server.address().address;
      var port = server.address().port;

      console.log('Example app listening at http://%s:%s', host, port);
    });
